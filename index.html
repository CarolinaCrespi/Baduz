<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
  <title>BADUZ - Maze Escape</title>
  <!-- Font & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Background Effects -->
  <div class="bg-grid"></div>
  <div class="bg-glow"></div>
  <div class="particles-container" id="particles"></div>

  <div class="page-container">
    <!-- Header -->
    <header class="main-header">
      <div class="title-container">
        <h1 class="game-title">
          <span class="title-letter">B</span>
          <span class="title-letter">A</span>
          <span class="title-letter">D</span>
          <span class="title-letter">U</span>
          <span class="title-letter">Z</span>
        </h1>
        <div class="title-sub">BADUZ</div>
      </div>

      <div class="header-controls">
        <button id="soundToggle" class="icon-btn" aria-label="Toggle sound">
          <i class="fas fa-volume-up"></i>
        </button>
        <button id="sfxToggle" class="icon-btn" aria-label="Toggle sound effects">
          <i class="fas fa-bell"></i>
        </button>
        <button id="aboutBtn" class="icon-btn info" aria-label="About game">
          <i class="fas fa-info-circle"></i>
        </button>
        <button id="langToggle" class="icon-btn" aria-label="Toggle language">
          <i class="fas fa-language"></i>
        </button>
      </div>
    </header>

    <!-- Tier Intro Modal -->
    <div id="tierModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="tierModalTitle"><i class="fas fa-bolt"></i> NEW MECHANICS</h2>
          <div class="modal-actions">
            <button id="tierLangToggle" class="icon-btn" aria-label="Toggle language">
              <i class="fas fa-language"></i>
            </button>
            <button id="closeTier" class="close-button" aria-label="Close">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <div class="modal-body">
          <div class="modal-text" id="tierModalText"></div>
          <div class="tip-box">
            <i class="fas fa-play"></i>
            <p id="tierModalHint"><strong>Tip:</strong> Press OK to start.</p>
          </div>
          <div style="display:flex; gap:10px; justify-content:center; margin-top: 18px;">
            <button id="btnTierOk" class="action-btn center-action" style="width:auto; padding: 12px 18px;">
              <div class="btn-icon"><i class="fas fa-check"></i></div>
              <div class="btn-text" id="tierOkLabel">OK</div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title"><i class="fas fa-robot"></i> <span id="aboutTitleText">ABOUT BADUZ</span></h2>
          <button id="closeAbout" class="close-button" aria-label="Close">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="game-logo-modal">
            <div class="logo-sphere"></div>
            <span class="logo-text">BADUZ</span>
          </div>

          <p class="modal-text" id="aboutLeadText">
            <i class="fas fa-gamepad"></i> <strong>BADUZ</strong> is a sentient neon sphere trapped in an ever-evolving cyber maze.
            Your mission: navigate through complex labyrinths, collect <span class="accent-orb"><i class="fas fa-gem"></i> Energy Orbs</span>,
            and find the exit before time runs out.
          </p>

          <div class="feature-grid">
            <div class="feature">
              <div class="feature-icon"><i class="fas fa-sitemap"></i></div>
              <h3 id="feat1Title">20 Levels</h3>
              <p id="feat1Desc">Progressively challenging mazes</p>
            </div>
            <div class="feature">
              <div class="feature-icon"><i class="fas fa-lightbulb"></i></div>
              <h3 id="feat2Title">Smart Hints</h3>
              <p id="feat2Desc">Use Orbs to reveal paths</p>
            </div>
            <div class="feature">
              <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
              <h3 id="feat3Title">Score System</h3>
              <p id="feat3Desc">Speed & efficiency matter</p>
            </div>
            <div class="feature">
              <div class="feature-icon"><i class="fas fa-mobile-alt"></i></div>
              <h3 id="feat4Title">Cross-Platform</h3>
              <p id="feat4Desc">Play anywhere</p>
            </div>
          </div>

          <div class="controls-guide">
            <h3><i class="fas fa-keyboard"></i> CONTROLS</h3>
            <div class="controls-list">
              <div class="control-item">
                <span class="key">
                  <i class="fas fa-arrow-up"></i>
                  <i class="fas fa-arrow-left"></i>
                  <i class="fas fa-arrow-down"></i>
                  <i class="fas fa-arrow-right"></i>
                </span>
                <span id="ctrlMove">Move Baduz</span>
              </div>
              <div class="control-item">
                <span class="key">H</span>
                <span id="ctrlHint">Use Hint</span>
              </div>
              <div class="control-item">
                <span class="key">P</span>
                <span id="ctrlPause">Pause Game</span>
              </div>
              <div class="control-item">
                <span class="key">R</span>
                <span id="ctrlReset">Reset Level</span>
              </div>
            </div>
          </div>

          <div class="tip-box">
            <i class="fas fa-lightbulb"></i>
            <p id="aboutTip"><strong>Pro Tip:</strong> Complete levels quickly for higher scores! The timer affects your final points.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Game Area -->
    <main class="game-area">
      <!-- Stats Dashboard -->
      <div class="stats-dashboard">
        <div class="stat-card player-card">
          <div class="stat-header">
            <i class="fas fa-user-astronaut"></i>
            <h3>PLAYER</h3>
          </div>
          <div class="stat-content">
            <div id="playerNameDisplay" class="player-name">Player</div>
            <button id="btnChangeName" class="edit-btn" aria-label="Change name">
              <i class="fas fa-edit"></i>
            </button>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <i class="fas fa-trophy"></i>
            <h3>SCORE</h3>
          </div>
          <div class="stat-content">
            <span id="score" class="stat-value">00000</span>
          </div>
        </div>

        <div class="stat-card time-card">
          <div class="stat-header">
            <i class="fas fa-clock"></i>
            <h3>TIME</h3>
          </div>
          <div class="stat-content">
            <span id="timer-display" class="stat-value">00:00:00</span>
            <div class="time-progress">
              <div class="time-bar"></div>
            </div>
          </div>
        </div>

        <div class="stat-card level-card">
          <div class="stat-header">
            <i class="fas fa-layer-group"></i>
            <h3>LEVEL</h3>
          </div>
          <div class="stat-content">
            <span id="levelDisplay" class="stat-value">1</span>
            <div class="level-progress">
              <div class="level-dots">
                <div class="dot active"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="stat-card reset-card">
          <div class="stat-header">
            <i class="fas fa-redo"></i>
            <h3>RESET</h3>
          </div>
          <div class="stat-content reset-card-body">
            <button id="btnReset" class="reset-top-btn">
              <i class="fas fa-redo"></i>
              <span>Reset (R)</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Game Canvas Container -->
      <div class="game-container">
        <div class="canvas-wrapper">
          <div class="canvas-frame">
            <canvas id="gameCanvas"></canvas>
            <div class="frame-glow"></div>
            <div class="canvas-overlay">
              <div class="quick-actions">
                <button id="btnQuickHint"   class="quick-btn hint-btn"   title="Quick Hint (H)">
                  <i class="fas fa-lightbulb"></i>
                </button>
                <button id="btnQuickPause"  class="quick-btn pause-btn"  title="Pause (P)">
                  <i class="fas fa-pause"></i>
                </button>
                <button id="btnQuickCenter" class="quick-btn center-btn" title="Center View">
                  <i class="fas fa-crosshairs"></i>
                </button>
              </div>
              <div class="canvas-stats">
                <div class="stat-circle orbs-circle">
                  <i class="fas fa-gem"></i>
                  <span id="orbsCircle">0</span>
                </div>
                <div class="stat-circle jump-circle">
                  <i class="fas fa-arrow-up"></i>
                  <span id="jumpCircle">0</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Game Controls -->
        <div class="game-controls">
          <div class="mobile-controls-section">
            <div class="virtual-joystick" id="joystick">
              <div class="joystick-base">
                <div class="joystick-cap"></div>
              </div>
              <div class="joystick-label">JOYSTICK</div>
            </div>

            <div class="mobile-buttons">
              <button class="mobile-btn hint-mobile"   id="btnMobileHint">
                <i class="fas fa-lightbulb"></i>
                <span>Hint</span>
              </button>
              <button class="mobile-btn pause-mobile"  id="btnMobilePause">
                <i class="fas fa-pause"></i>
                <span>Pause</span>
              </button>
              <button class="mobile-btn center-mobile" id="btnMobileCenter">
                <i class="fas fa-crosshairs"></i>
                <span>Center</span>
              </button>
              <button class="mobile-btn jump-mobile"   id="btnMobileJump">
                <i class="fas fa-arrow-up"></i>
                <span>Jump</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
      <div class="footer-content">
        <div class="footer-logo">
          <div class="footer-sphere"></div>
          <span>BADUZ</span>
        </div>
        <div class="footer-info">
          <p class="copyright">
            <i class="far fa-copyright"></i> 2026 Carolina Crespi
          </p>
          <p class="tech-info">
            Powered by Phaser 3 | Built with <i class="fas fa-heart"></i>
          </p>
        </div>
        <div class="social-links">
          <a href="#" class="social-link" aria-label="GitHub">
            <i class="fab fa-github"></i>
          </a>
        </div>
      </div>
    </footer>
  </div>

  <!-- =====================================================
       SCRIPTS â€” ordine di caricamento importante:
       1. Phaser (libreria esterna)
       2. Costanti (usate da tutti i moduli)
       3. Sistemi indipendenti (rng, scoring, player, pathfinding)
       4. Joystick (sistema UI standalone)
       5. Traduzioni (dati i18n)
       6. MazeScene (scena Phaser, usa tutto quanto sopra)
       7. main.js (inizializza Phaser)
       8. ui.js (DOM events, usa traduzioni e joystick)
  ===================================================== -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
  <script src="src/data/constants.js"></script>
  <script src="src/systems/rng.js"></script>
  <script src="src/systems/scoring.js"></script>
  <script src="src/systems/player.js"></script>
  <script src="src/systems/pathfinding.js"></script>
  <script src="src/systems/joystick.js"></script>
  <script src="src/i18n/translations.js"></script>
  <script src="src/scenes/MazeScene.js"></script>
  <script src="src/scenes/main.js"></script>
  <script src="ui.js"></script>
</body>
</html>
