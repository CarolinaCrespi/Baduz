/* ========== BASE RESET ========== */
* { margin:0; padding:0; box-sizing:border-box; }

body {
  background-color:#0a0a0a;
  font-family:'Press Start 2P', cursive;
  color:#0ff;
  position:relative;
}
body::after{
  content:"";
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:repeating-linear-gradient(
    0deg,
    rgba(0,0,0,0.15) 0px,
    rgba(0,0,0,0.15) 1px,
    transparent 1px,
    transparent 2px
  );
  pointer-events:none; z-index:999;
}

/* ========== TYPO / HERO ========== */
.game-title{
  text-align:center; font-size:60px; color:#0ff;
  text-shadow:0 0 30px #f0f, 0 0 20px #f0f, 0 0 30px #f0f;
  margin-top:20px; letter-spacing:2px; text-transform:uppercase;
}
.game-description{
  text-align:center; font-size:30px; color:#0ff;
  margin-top:10px; margin-bottom:20px; text-shadow:0 0 5px #0ff;
}
.how-to-play{
  text-align:center; font-size:18px; color:#0ff; margin-top:20px; padding:15px;
  border:2px solid #0ff; box-shadow:0 0 10px #0ff; width:60%; margin-left:auto; margin-right:auto;
}
.how-to-play h2{ font-size:24px; text-shadow:0 0 10px #0ff; margin-bottom:10px; }
.how-to-play p{ margin:5px 0; }

/* ========== WRAPPER GIOCO ========== */
.game-container{
  display:none; justify-content:center; align-items:center; min-height:100vh; padding:20px; flex-direction:column;
}
.game-wrapper{
  position:relative;
  border:4px solid #0ff;
  border-radius:8px;
  box-shadow:0 0 15px #0ff, inset 0 0 15px #0ff;
  background-color:transparent;   /* trasparente per effetto neon sul canvas */
  padding:20px;
}

/* Canvas */
#gameCanvas{
  border:2px solid #f0f;
  box-shadow:0 0 20px #f0f, inset 0 0 10px #f0f;
  display:block;
  max-width:100%;
  height:auto;
}

/* ========== TOP BAR ========== */
.topbar-minimal{
  display:grid;
  grid-template-columns: auto;
  gap: 28px;
  align-items:center;
  justify-content:center;
  margin-bottom:14px;
  padding:10px;
  background:#111;
  border:2px solid #90f;
  box-shadow:0 0 10px #90f;
}
.topbar-minimal.only-level{
  display: grid;
  grid-template-columns: auto;
  justify-content: center;
  padding: 12px 16px;
}
.big-level span{
  font-size: 18px;
  letter-spacing: 2px;
  text-shadow: 0 0 10px #0ff;
}
.big-level #levelDisplay{
  font-size: 40px;
  line-height: 1;
  margin-top: 4px;
  color: #0ff;
  text-shadow: 0 0 18px #0ff, 0 0 28px #f0f;
}

/* ========== LAYOUT 3 COLONNE ========== */
.stage-rails{
  display:grid;
  grid-template-columns: 220px 1fr 220px; /* sinistra | canvas | destra */
  gap: 16px;
  align-items: start;
}

/* Colonna SINISTRA */
.side-panel {
  background-color:#111;
  border:2px solid #0ff;
  box-shadow:0 0 12px #0ff;
  padding:10px;
  border-radius:8px;
  width:210px;
  text-align:center;
}
.panel-title {
  font-size:14px;
  color:#0ff;
  margin-bottom:8px;
  text-shadow:0 0 10px #0ff;
  border-bottom:1px solid #0ff;
  padding-bottom:4px;
}
.info-box{ text-align:center; padding:10px; }
.info-box span{ display:block; margin-bottom:5px; color:#0ff; text-shadow:0 0 10px #0ff; }

/* Colonna DESTRA */
.rail{
  background:#111;
  border:2px solid #0ff;
  box-shadow:0 0 10px #0ff, inset 0 0 8px #0ff;
  border-radius:8px;
  padding:12px;
}
.controls-title{
  font-size:12px; color:#0ff; text-align:center; margin-bottom:10px; letter-spacing:1px; text-shadow:0 0 8px #0ff;
}
.play-button.block{
  width:100%;
  margin-bottom:10px;
  font-size:14px;
  padding:10px 12px;
}
.controls-help{
  margin-top:6px; font-size:12px; color:#0ff; opacity:.85; text-align:center;
}

/* Bottoni generici */
.play-button-container{ text-align:center; margin:50px 0; }
.play-button{
  padding:15px 30px; background:#0f0; border:2px solid #0f0; color:#000;
  font-family:'Press Start 2P', cursive; cursor:pointer; transition:all .3s;
  box-shadow:0 0 10px #0f0; text-transform:uppercase; font-size:24px;
}
.play-button:hover{ background:#000; color:#0f0; transform:scale(1.05); }
.play-button.mini{ font-size:12px; padding:8px 12px; }
.play-button.danger{ background:#f33; border-color:#f33; color:#000; }

/* Icona matita nickname */
.mini-edit {
  background: none;
  border: none;
  color: #0ff;
  font-size: 12px;
  margin-left: 6px;
  cursor: pointer;
  text-shadow: 0 0 5px #0ff;
}
.mini-edit:hover {
  color: #fff;
  text-shadow: 0 0 8px #fff;
}

/* Footer */
.copyright{
  text-align:center; font-size:10px; color:#0ff;
  position:relative; bottom:6px; width:100%; text-shadow:0 0 5px #0ff;
}

/* ========== DEMO MODE (quando apri con ?demo=true) ========== */
.demo-mode .game-title,
.demo-mode .game-description,
.demo-mode .play-button-container,
.demo-mode .how-to-play{ display:none; }
.demo-mode .game-container{ display:flex; min-height:100vh; padding:0; }
.demo-mode .game-wrapper{ border:none; box-shadow:none; padding:0; }

/* ========== D-PAD MOBILE ========== */
.dpad{
  position: fixed;
  bottom: 16px;
  left: 16px;
  z-index: 2000;
  display: none;             /* nascosto di default (desktop) */
  user-select: none;
  -webkit-user-select: none;
  touch-action: none;        /* evita scroll mentre tocchi */
}
.dpad-grid{
  display: grid;
  grid-template-columns: 56px 56px 56px;
  grid-template-rows: 56px 56px;
  gap: 8px;
  align-items: center;
  justify-items: center;
}
.dpad-btn{
  width: 56px;
  height: 56px;
  border-radius: 10px;
  border: 2px solid #33ffaa;        /* bordo neon */
  background: #001a14;              /* scuro con tinta verdina */
  color: #33ffaa;
  font-family: 'Press Start 2P', cursive;
  font-size: 18px;
  line-height: 1;
  box-shadow: 0 0 10px #00ff66, inset 0 0 6px #003322;
  cursor: pointer;
}
.dpad-btn:active{
  transform: translateY(1px) scale(0.98);
  box-shadow: 0 0 16px #00ff66, inset 0 0 10px #005533;
}
.dpad-btn.center{
  opacity: .85;
  border-color: #0ff;
  color: #0ff;
  background: #001018;
  box-shadow: 0 0 10px #0ff, inset 0 0 6px #001a22;
}
.dpad .spacer{ width:56px; height:56px; opacity:0; }

/* Mostra il dpad su dispositivi touch oppure su schermi piccoli */
body.touch .dpad{ display: block; }
@media (max-width: 980px){
  .dpad{ display: block; }
}

/* Evita che il dpad copra i pulsanti di destra sui telefoni stretti */
@media (max-width: 480px){
  .dpad{ bottom: 14px; left: 12px; transform: scale(0.9); transform-origin: bottom left; }
}

/* ========== RESPONSIVE GENERALE ========== */
@media (max-width: 1200px){
  .stage-rails{ grid-template-columns: 180px 1fr 180px; }
}
@media (max-width: 980px){
  .stage-rails{ grid-template-columns: 150px 1fr 150px; }
  .play-button.block{ font-size:13px; padding:8px 10px; }
}
@media (max-width: 820px){
  .stage-rails{ overflow-x:auto; }
}

