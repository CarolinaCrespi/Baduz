<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BADUZ</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="stile.css">
</head>
<body>
  <div class="game-title">BADUZ</div>

  <div class="game-description">
    Baduz is a glowing sphere determined to escape from complex mazes.<br><br>
    Collect <span style="color:#00ffff;text-shadow:0 0 6px #00ffff;">Orbs</span> to unlock helpful hints.<br>
    If you get lost, spend your Orbs to reveal a glowing path leading to the exit.<br><br>
    How fast can you break free?
  </div>

  <div class="how-to-play">
    <h2>HOW TO PLAY</h2>
    <p>Use the <strong>arrow keys</strong> to move Baduz through the maze.</p>
    <p>Press <strong>P</strong> to pause / resume.</p>
    <p><strong>S</strong> = Save, <strong>L</strong> = Load, <strong>R</strong> = Reset</p>
    <br>
    <span style="color:#ff0000;text-shadow:0 0 5px #ff0000;font-size:12px;">DESKTOP VERSION ONLY (keyboard)<br>Mobile-ready with on‑screen joystick</span>
  </div>

  <div class="play-button-container">
    <button id="playBtn" class="play-button">PLAY</button>
  </div>

  <div class="game-container">
    <div class="game-wrapper">

      <!-- TOP BAR (solo livello) -->
      <div class="topbar-minimal only-level">
        <div class="info-box big-level">
          <span>LEVEL</span>
          <div id="levelDisplay">1</div>
        </div>
      </div>

      <!-- AREA PRINCIPALE: 3 colonne su desktop -->
      <div class="stage-rails">
        <!-- SINISTRA: Stats -->
        <div class="side-panel left">
          <div class="panel-title">STATS</div>

          <div class="info-box">
            <span>PLAYER</span>
            <div id="playerNameDisplay">Guest <button id="btnChangeName" class="mini-edit">✎</button></div>
          </div>

          <div class="info-box">
            <span>SCORE</span>
            <div id="score">00000</div>
          </div>

          <div class="info-box">
            <span>ORBS</span>
            <div id="energyDisplay">0</div>
          </div>

          <div class="info-box">
            <span>TIMER</span>
            <div id="timer-display">00:00:00</div>
          </div>
        </div>

        <!-- CENTRO: Canvas + HUD mobile + Joystick -->
        <div class="stage-center">
          <canvas id="gameCanvas" width="1000" height="700"></canvas>

          <!-- HUD compatta per mobile -->
          <div id="mobileHud" class="mobile-hud" aria-hidden="true">
            <div class="mobile-row">
              <div class="chip"><span>Player</span><strong id="mPlayer">Guest</strong></div>
              <div class="chip"><span>Score</span><strong id="mScore">00000</strong></div>
              <div class="chip"><span>Orbs</span><strong id="mOrbs">0</strong></div>
              <div class="chip"><span>Timer</span><strong id="mTimer">00:00:00</strong></div>
            </div>
            <div class="mobile-row">
              <button id="btnHintM"  class="pill">Hint</button>
              <button id="btnSaveM"  class="pill">Save</button>
              <button id="btnLoadM"  class="pill">Load</button>
              <button id="btnResetM" class="pill danger">Reset</button>
            </div>
          </div>

          <!-- Joystick virtuale (mobile) -->
          <div id="joystick" class="joystick" aria-hidden="true">
            <button class="pad btn-up"    data-dir="up"    aria-label="Up"></button>
            <button class="pad btn-left"  data-dir="left"  aria-label="Left"></button>
            <div    class="pad center" aria-hidden="true"></div>
            <button class="pad btn-right" data-dir="right" aria-label="Right"></button>
            <button class="pad btn-down"  data-dir="down"  aria-label="Down"></button>
          </div>
        </div>

        <!-- DESTRA: Controlli verticali -->
        <aside class="rail right-rail">
          <div class="controls-title">CONTROLS</div>
          <button id="btnHint"  class="play-button block">Hint (H)</button>
          <button id="btnSave"  class="play-button block">Save (S)</button>
          <button id="btnLoad"  class="play-button block">Load (L)</button>
          <button id="btnReset" class="play-button block danger">Reset (R)</button>
          <div class="controls-help">            
          <div id="joystick" class="joystick">
            <button class="joy up"    aria-label="Up">▲</button>
            <div class="joy-row">
              <button class="joy left"  aria-label="Left">◀</button>
              <div class="joy-center" aria-hidden="true"></div>
              <button class="joy right" aria-label="Right">▶</button>
            </div>
            <button class="joy down"  aria-label="Down">▼</button>
          </div>            
            <p>Arrows = Move</p>
            <p>P = Pause</p>
          </div>
        </aside>
      </div>

    </div>
  </div>

  <div class="copyright">© 2025 Carolina Crespi. All rights reserved.</div>

  <!-- Phaser -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
  <!-- Gioco -->
  <script src="demo.js"></script>

  <!-- Script per demo mode e bottone PLAY -->
  <script>
    (function(){
      const params = new URLSearchParams(location.search);
      if (params.has('demo')) {
        document.body.classList.add('demo-mode');
        const canvas = document.getElementById('gameCanvas');
        if (canvas) {
          canvas.width  = Math.floor(window.innerWidth * 0.95);
          canvas.height = Math.floor(window.innerHeight * 0.85);
        }
      }
      const playBtn = document.getElementById('playBtn');
      if (playBtn) {
        playBtn.addEventListener('click', () => {
          const base = location.href.split('?')[0];
          location.href = base + '?demo=true';
        });
      }
    })();
  </script>
</body>
</html>
